---
layout: default
---

{% assign sorted_collections = site.collections | sort: "position" %}
{% for collection in sorted_collections %}
    {% assign sorted_docs = collection.docs | sort: "position" %}
        {% for doc in sorted_docs %}
            {% if doc.collection == "documentation" %}
                <div class="doc doc-full">
                    <div class="info">
                        <h2 class="title">
                            <a id="{{ doc.slug }}"></a>
                            {{ doc.title }}
                        </h2>
                        <p>{{ doc.content }}</p>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
{% endfor %}

{% assign allData = site.data %}

{% for data in allData %}
    {% assign singleData = data[1] %}
    {% for path in singleData.paths %}
            {% for method in path[1] %}
            <div class="doc">
                <a id="{{ path[0] }}_{{ method[0] }}"></a>
                <div class="info">
                    <h2 class="title">
                        <span class="method-{{ method[0] }}" data-after="{{ method[0] }}">
                            {{ path[0] }}
                        </span>
                    </h2>
                    <p class="summary">{{ method[1].summary }}</p>
                    <p class="summary">{{ method[1].description }}</p>

                    {% capture fileName %}{{ path[0] }}_{{ method[0] }}{% endcapture %}
                    {% comment %}
                        Todo: replace { and } dynamically
                    {% endcomment %}
                    {% assign fileNameStripped = fileName | replace: '/', '' | replace: '{id}', '_id' %}

                    {% for collection in site.collections %}
                    {% assign docs = collection.docs %}
                        {% for doc in docs %}
                            {% if doc.collection == "api" %}
                                {% if doc.slug ==  fileNameStripped %}
                                    {{ doc.content }}
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    {% endfor %}


                    {% assign parameters = method[1].parameters %}
                    {% include parameters.html data=parameters %}
                </div>
                {% include preview.html %}
            </div>
        {% endfor %}
    {% endfor %}
    {% for definition in singleData.definitions %}
            <div class="doc">
                <a id="definition_{{ definition[0] }}"></a>
                <div class="info">
                    <h2 class="title">
                            {{ definition[0] }}
                    </h2>
                    <p class="summary">{{ definition[1].summary }}</p>
                    <p class="summary">{{ definition[1].description }}</p>

                    {% capture fileName %}{{ definition[0] }}{% endcapture %}
                    {% comment %}
                        Todo: replace { and } dynamically
                    {% endcomment %}
                    {% assign fileNameStripped = fileName | replace: '/', '' | replace: '{id}', '_id' %}

                    {% for collection in site.collections %}
                    {% assign docs = collection.docs %}
                        {% for doc in docs %}
                            {% if doc.collection == "api" %}
                                {% if doc.slug ==  fileNameStripped %}
                                    {{ doc.content }}
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    {% endfor %}


                    {% assign parameters = method[1].properties %}
                    {% include parameters.html data=parameters %}
                </div>
            </div>
        {% endfor %}
    {% endfor %}
{% endfor %}
